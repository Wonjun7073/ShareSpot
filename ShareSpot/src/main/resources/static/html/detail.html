<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>게시글 상세 - ShareSpot</title>
    <link rel="stylesheet" href="../Css/style.css" />
    <link rel="stylesheet" href="../Css/detail.css" />
  </head>
  <body>
    <div class="sidebar">
      <div class="brand">
        <img src="../Images/logo.png" alt="로고" class="brand-logo" />
        <div class="brand-text">
          <h1>쉐어스팟</h1>
          <p>시흥시 정왕동</p>
        </div>
      </div>

      <div class="menu">
        <a href="./main.html" class="menu-item">
          <span class="menu-icon">🏠</span> 홈
        </a>
        <a href="./chat.html" class="menu-item">
          <span class="menu-icon">💬</span> 채팅
          <span class="badge" id="chatBadge" style="display: none"></span>
        </a>
        <a href="./my.html" class="menu-item">
          <span class="menu-icon">👤</span> 나의 시흥
        </a>
      </div>

      <a href="#" class="login" id="logoutBtn"> <span>📕</span> 로그아웃 </a>
    </div>

    <main class="main-content">
      <div class="detail-header">
        <button id="btnBack" class="nav-back-btn">돌아가기</button>
        <h2 class="nav-title">게시글 상세</h2>
      </div>

      <div class="detail-centering-wrapper">
        <div class="detail-card">
          <div class="image-area">
            <img id="postImage" src="../Images/logo.png" alt="상품 이미지" />
          </div>

          <div class="user-profile-section">
            <div class="avatar" id="postAuthorAvatar">?</div>
            <div class="user-text">
              <div class="name" id="postAuthorName">로딩중...</div>
              <div class="loc" id="postLocation">위치 정보</div>
            </div>
          </div>

          <hr class="divider" />

          <div class="post-text-area">
            <div class="badge-row">
              <span class="category-badge" id="postCategory">카테고리</span>
            </div>
            <h1 class="post-title" id="postTitle">제목 로딩중...</h1>
            <div class="post-time" id="postTime">시간</div>
            <p class="post-desc" id="postDesc">내용을 불러오는 중입니다...</p>
            <div class="post-stats">조회 0 · 채팅 0 · 관심 0</div>
          </div>

          <hr class="divider" />

          <div class="price-section">
            <div class="price-label">가격</div>
            <div class="price-value" id="postPrice">--원</div>
          </div>

          <div class="card-footer">
            <div class="heart-container">
              <button id="btnHeart" class="heart-btn">♡</button>
            </div>
            <button id="btnChat" class="chat-btn">채팅하기</button>
          </div>
        </div>
      </div>
    </main>

    <script src="../JS/auth.js"></script>
    <script src="../JS/app.js"></script>
    <script src="../JS/detail.js"></script>
    <script>
      // 로그아웃 로직
      document.getElementById("logoutBtn")?.addEventListener("click", (e) => {
        e.preventDefault();
        if (confirm("로그아웃 하시겠습니까?")) {
          fetch("/api/users/logout", { method: "POST" }).finally(
            () => (location.href = "./login.html")
          );
        }
      });

      // 돌아가기 버튼 로직
      document.getElementById("btnBack")?.addEventListener("click", () => {
        history.back();
      });
    </script>
  </body>
</html>
